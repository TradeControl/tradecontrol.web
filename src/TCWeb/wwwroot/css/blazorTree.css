/* Admin Manager / Blazor tree manager shell
   - Desktop split panes using Split.js
   - Fixed viewport workspace between header and fixed footer
   - RHS iframe fills remaining height under the selected-node header
   - Admin Manager tree styles (Explorer-like density)
*/

:root {
    --tc-header-offset: 0px; /* set by Admin/Manager/Index.cshtml JS */
    --tc-workspace-gap: 12px; /* fixed margin around the workspace */
    --tc-tree-manager-footer: var(--tc-footer-height, 60px);
    --tc-tree-font-size: 0.95rem;
    --tc-tree-row-pad-y: 0.25rem;
    --tc-tree-row-pad-x: 0.5rem;
    --tc-tree-row-radius: 4px;
    --tc-tree-selected-bg: #ffe0b2; /* aligns with site table header accent */
    --tc-tree-selected-fg: #e65100;
    --tc-tree-hover-bg: #fffde7;
    --tc-tree-icon-muted: #6c757d;
    --tc-safe-bottom: env(safe-area-inset-bottom, 0px);
    --tc-safe-top: env(safe-area-inset-top, 0px);
    --tc-viewport-height: 100dvh; /* JS overwrites with px value on mobile */
}

/* Fixed workspace between header and footer (Explorer-style) */
html, body {
    height: 100%;
}

.tc-tree-workspace {
    position: absolute;
    left: var(--tc-workspace-gap);
    right: var(--tc-workspace-gap);
    top: calc(var(--tc-header-offset) + var(--tc-workspace-gap) + var(--tc-safe-top));
    height: calc( var(--tc-viewport-height) - var(--tc-header-offset) - var(--tc-tree-manager-footer) - (var(--tc-workspace-gap) * 2) - var(--tc-safe-top) - var(--tc-safe-bottom) );
    overflow: hidden;
    z-index: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
}

/* iOS Safari friendly viewport */
@supports (height: 100dvh) {
    html, body {
        min-height: 100dvh;
    }
}

/* Component wrapper */
.tc-tree-manager {
    display: flex;
    flex-direction: column;
    width: 100%;
    min-height: 0;
    flex: 1 1 auto; /* fill tc-tree-workspace */
    box-sizing: border-box;
}

/* Outer frame (border/rounded/padding applied in markup) must stretch */
.tc-tree-manager-frame {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    min-height: 0;
    box-sizing: border-box;
}

/* ---- Admin Manager tree (Explorer-like) ---- */
.tc-admin-manager-tree {
    font-size: var(--tc-tree-font-size);
    line-height: 1.25;
}

.tc-tree-row {
    padding: var(--tc-tree-row-pad-y) var(--tc-tree-row-pad-x);
    border-radius: var(--tc-tree-row-radius);
    color: inherit;
    text-decoration: none;
}

    .tc-tree-row:hover {
        background: var(--tc-tree-hover-bg);
        text-decoration: none;
    }

.tc-tree-expander {
    display: inline-flex;
    width: 1.1rem;
    justify-content: center;
    margin-right: 0.25rem;
    color: var(--tc-tree-icon-muted);
}

.tc-tree-icon {
    color: var(--tc-tree-icon-muted);
}

.tc-tree-icon-root {
    color: #f57c00; /* subtle brand tint */
}

.tc-tree-icon-setup {
    color: #1976d2; /* slight functional tint */
}

.tc-tree-icon-filetransfer {
    color: #198754; /* Bootstrap 'success' tone to match transfer/action */
}

.tc-tree-icon-contenttype {
    color: #fbc02d; /* folder yellow */
}

/* Template/document icons (Bootstrap icons) */
.tc-admin-manager-tree i.bi-filetype-html {
    color: #6f42c1; /* purple */
}

.tc-admin-manager-tree i.bi-files {
    color: #0d6efd; /* blue */
}

.tc-admin-manager-tree i.bi-images,
.tc-admin-manager-tree i.bi-image {
    color: #d63384; /* pink */
}

.tc-admin-manager-tree i.bi-paperclip {
    color: #20c997; /* teal */
}

.tc-admin-manager-tree i.bi-file-earmark,
.tc-admin-manager-tree i.bi-file-earmark-text {
    color: #fd7e14; /* orange */
}

/* Templates module icons (<i class="bi ..."> used in ManagerTreeHost.razor) */
.tc-admin-manager-tree i.bi-receipt {
    color: #0d6efd; /* blue (Invoices) */
}

.tc-admin-manager-tree i.bi-gear {
    color: #495057; /* dark gray (System) */
}

.tc-admin-manager-tree i.bi-envelope-at {
    color: #0dcaf0; /* Bootstrap 'info' tone for email */
}

.tc-tree-icon-users {
    color: #0d6efd; /* Bootstrap primary blue */
}

.tc-admin-manager-tree i.bi-calendar3 {
    color: #0d6efd;
}

.tc-admin-manager-tree i.bi-sliders {
    color: #20c997;
}

.tc-admin-manager-tree i.bi-receipt {
    color: #6f42c1;
}

.tc-admin-manager-tree i.bi-bank {
    color: #198754;
}

.tc-tree-label {
    display: inline-block;
    padding: 0.06rem 0.25rem;
    border-radius: var(--tc-tree-row-radius);
}

.tc-tree-label-selected {
    background: var(--tc-tree-selected-bg);
    color: var(--tc-tree-selected-fg);
}

/* ---- Desktop split ---- */
@media (min-width: 992px) {
    .tc-tree-split {
        display: flex;
        width: 100%;
        flex: 1 1 auto;
        min-height: 0;
        align-items: stretch;
        gap: 0; /* gutter handled by Split.js */
        box-sizing: border-box;
        overflow: hidden;
    }

        .tc-tree-split .tc-pane {
            display: flex;
            flex-direction: column;
            min-width: 0;
            min-height: 0;
            box-sizing: border-box;
        }

    /* Inner bordered pane content must fill height and scroll internally */
    #leftCol > div,
    #rightCol > div {
        display: flex;
        flex-direction: column;
        flex: 1 1 auto;
        min-height: 0;
        overflow: hidden;
        box-sizing: border-box;
    }

    /* If the pane contains scrollable content, scroll inside it */
    #leftCol > div {
        overflow: auto;
    }

    /* RHS: header + iframe/card; keep it a flex column and let children size correctly */
    #rightCol > div {
        overflow: hidden;
    }

    /* Split.js initial sizing (removed after init) */
    #leftCol.tc-initial-left {
        flex: 0 1 33.333%;
        max-width: 33.333%;
    }

    #rightCol.tc-initial-right {
        flex: 1 1 66.667%;
        max-width: 66.667%;
    }

    /* Split.js gutter */
    .gutter {
        flex: 0 0 6px;
        background: #e0e0e0;
        cursor: col-resize;
        position: relative;
    }

        .gutter:hover {
            background: #d0d0d0;
        }

    /* RHS iframe: fill the remaining height UNDER the selected-node header */
    .tc-details-frame {
        display: block;
        flex: 1 1 auto;
        width: 100%;
        min-height: 0;
        height: auto; /* do not use 100% in a flex column with a header above */
        border: 0; /* border is provided by markup class 'border rounded' */
    }
}

/* Utility: allow columns to shrink without horizontal scroll */
#leftCol,
#rightCol {
    min-width: 0;
}

/* ---- Generic tree context menu (Blazor) ---- */
.tc-tree-ctx-backdrop {
    position: fixed;
    inset: 0;
    background: transparent;
    z-index: 2000;
}

.tc-tree-ctx-menu {
    position: fixed;
    min-width: 180px;
    z-index: 2010;
}

.tc-tree-ctx-menu .dropdown-item {
    width: 100%;
    text-align: left;
    background: transparent;
    border: 0;
    padding: 0.45rem 0.85rem;
}

.tc-tree-ctx-menu .dropdown-item:hover {
    background: #f8f9fa;
}

@media (max-width: 991.98px) {
    :root {
        --tc-tree-manager-footer: 0px;
    }

    .tc-tree-workspace {
        z-index: auto;
    }
}

.tc-ft-topbtn {
    min-height: 44px; /* iOS-friendly tap target */
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.tc-ft-upload-hint {
    min-height: 1.25rem; /* reserves one text line so button heights stay aligned */
    line-height: 1.25rem;
}

@media (max-width: 991.98px) {
    .tc-tree-workspace {
        position: static;
        left: auto;
        right: auto;
        top: auto;
        height: auto;
        overflow: visible;
        z-index: auto;
    }

    .tc-tree-manager,
    .tc-tree-manager-frame {
        min-height: 0;
    }

        .tc-tree-manager-frame,
        .tc-tree-manager-frame > div {
            overflow: hidden;
        }

    .tc-tree-host {
        overflow: auto;
        -webkit-overflow-scrolling: touch;
        max-height: calc(100dvh - var(--tc-footer-height, 0px));
    }

    header,
    header .navbar,
    header .navbar-collapse {
        position: relative;
        z-index: 3000;
    }
}







